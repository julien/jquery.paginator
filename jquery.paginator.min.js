(function(t){var e="paginator",i={items:[],itemsPerPage:5,placeholder:null,template:null,useDom:false};function s(s,h){this.element=s;this.settings=t.extend({},i,h);this._defaults=i;this._name=e;this.$el=t(this.element);this.$placeholder=this.settings.placeholder||t(this.element);this.template=this.settings.template;this.items=[];this.totalItems=0;this.itemsPerPage=this.settings.itemsPerPage;this.itemIdxStart=0;this.itemIdxEnd=0;this.page=0;this.totalPages=0;this.changeHandler=t.isFunction(this.settings.change)?this.settings.change:t.noop;this.init()}t.extend(s.prototype,{init:function(){if(this.settings.items){this.items=this.settings.items}if(this.settings.useDom){this.items=this.$placeholder.children().clone();this.$placeholder.empty()}this.totalItems=this.items.length;this._update();if(this.items.length){this.render(this.currentItems());this.changeHandler({start:1,end:this.itemIdxEnd,total:this.totalItems})}},empty:function(){if(this.currentChildren().length){this.$placeholder.empty()}},_notify:function(){this.changeHandler({start:this.itemIdxStart+1,end:this.itemIdxStart+this.itemsPerPage,total:this.totalItems})},_update:function(){var t=this.itemsPerPage,e=this.totalItems,i=0,s;if(e&&t){i=Math.floor(e/t);if(e%t>0){i++}this.totalPages=i;if(this.page<1){this.page=1}this.itemIdxStart=(this.page-1)*this.itemsPerPage;s=this.itemIdxStart+this.itemsPerPage;this.itemIdxEnd=s>this.totalItems?this.totalItems:s}},currentChildren:function(){return this.$placeholder.children()},currentItems:function(){return this.items.slice(this.itemIdxStart,this.itemIdxEnd)},render:function(e){var i,s,h;if(!this.settings.useDom&&this.template){if(t.isArray(e)){this.empty();h=[];s=this.currentItems().length;for(i=0;i<s;i++){h[i]=this.template(e[i])}this.$placeholder.append(h.join(""))}else if(t.isPlainObject(e)){h=this.template(e);this.$placeholder.append(h)}}else if(this.settings.useDom){this.empty();this.$placeholder.append(this.currentItems())}},add:function(t){var e;if(!this.useDom){e=this.currentChildren().length;this.items.push(t);this.totalItems=this.items.length;this._update();this.itemIdxEnd++;this._notify();if(e<this.itemsPerPage){this.render(t)}}},remove:function(t){var e,i;t=t<0?0:t;t=t>this.items.length?this.items.length:t;if(!this.items[t]){t=this.items.length-1}if(!this.useDom){e=this.itemIdxStart;i=this.itemIdxEnd;if(t>=e&&t<=i){this.$placeholder.children().eq(t).remove()}if(this.items[t]){this.items.splice(t,1);this.totalItems=this.items.length;this._update();this._notify()}}},next:function(){var t=this.currentChildren().length,e=this.page<this.totalPages&&t>=this.itemsPerPage;if(e){this.page++;this._update();this.render(this.currentItems());this._notify()}},prev:function(){if(this.page>1){this.page--;this._update();this.render(this.currentItems());this._notify()}}});t.fn[e]=function(i){this.each(function(){if(!t.data(this,e)){t.data(this,e,new s(this,i))}});return this}})(jQuery);